import React, { useState } from 'react';\nimport { Navbar, Nav, Container, Button, Badge, Dropdown } from 'react-bootstrap';\nimport { useAuth } from '../../context/AuthContext';\nimport { useNavigate } from 'react-router-dom';\n\nconst AppNavbar = () => {\n  const { user, logout, cart } = useAuth();\n  const navigate = useNavigate();\n  const [showChatDropdown, setShowChatDropdown] = useState(false);\n\n  const handleLogout = () => {\n    logout();\n    navigate('/');\n  };\n\n  const openChat = (chatType) => {\n    if (chatType === 'vendor') {\n      navigate('/chat/vendor');\n    } else if (chatType === 'shopkeeper') {\n      navigate('/chat/shopkeeper');\n    } else if (chatType === 'support') {\n      navigate('/chat/support');\n    }\n  };\n\n  return (\n    <Navbar bg=\"dark\" variant=\"dark\" expand=\"lg\" sticky=\"top\">\n      <Container fluid>\n        <Navbar.Brand onClick={() => navigate('/')} style={{cursor: 'pointer'}}>\n          ğŸª B2B Commerce\n        </Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"me-auto\">\n            <Nav.Link onClick={() => navigate('/')}>ğŸ  Home</Nav.Link>\n            \n            {user?.role === 'shopkeeper' && (\n              <>\n                <Nav.Link onClick={() => navigate('/cart')}>\n                  ğŸ›’ Cart {cart.length > 0 && <Badge bg=\"danger\">{cart.length}</Badge>}\n                </Nav.Link>\n                <Nav.Link onClick={() => navigate('/orders')}>ğŸ“¦ My Orders</Nav.Link>\n              </>\n            )}\n            \n            {user?.role === 'vendor' && (\n              <>\n                <Nav.Link onClick={() => navigate('/dashboard')}>ğŸ“Š Dashboard</Nav.Link>\n                <Nav.Link onClick={() => navigate('/products')}>ğŸ“¦ Products</Nav.Link>\n                <Nav.Link onClick={() => navigate('/orders')}>ğŸ“‹ Orders</Nav.Link>\n              </>\n            )}\n            \n            {user?.role === 'admin' && (\n              <>\n                <Nav.Link onClick={() => navigate('/admin')}>âš™ï¸ Admin Panel</Nav.Link>\n                <Nav.Link onClick={() => navigate('/users')}>ğŸ‘¥ Users</Nav.Link>\n                <Nav.Link onClick={() => navigate('/reports')}>ğŸ“Š Reports</Nav.Link>\n              </>\n            )}\n\n            {/* Chat Dropdown */}\n            {user && (\n              <Dropdown show={showChatDropdown} onToggle={setShowChatDropdown}>\n                <Dropdown.Toggle as={Nav.Link} style={{ cursor: 'pointer' }}>\n                  ğŸ’¬ Chat <Badge bg=\"success\">3</Badge>\n                </Dropdown.Toggle>\n                <Dropdown.Menu>\n                  {user.role === 'shopkeeper' && (\n                    <>\n                      <Dropdown.Item onClick={() => openChat('vendor')}>\n                        ğŸª Chat with Vendors\n                      </Dropdown.Item>\n                      <Dropdown.Item onClick={() => openChat('support')}>\n                        ğŸ§ Customer Support\n                      </Dropdown.Item>\n                    </>\n                  )}\n                  {user.role === 'vendor' && (\n                    <>\n                      <Dropdown.Item onClick={() => openChat('shopkeeper')}>\n                        ğŸ›’ Chat with Shopkeepers\n                      </Dropdown.Item>\n                      <Dropdown.Item onClick={() => openChat('support')}>\n                        ğŸ§ Support Team\n                      </Dropdown.Item>\n                    </>\n                  )}\n                  {user.role === 'admin' && (\n                    <>\n                      <Dropdown.Item onClick={() => openChat('support')}>\n                        ğŸ§ Support Chats\n                      </Dropdown.Item>\n                      <Dropdown.Item onClick={() => openChat('broadcast')}>\n                        ğŸ“¢ Broadcast Messages\n                      </Dropdown.Item>\n                    </>\n                  )}\n                  <Dropdown.Divider />\n                  <Dropdown.Item onClick={() => navigate('/chat/history')}>\n                    ğŸ“œ Chat History\n                  </Dropdown.Item>\n                </Dropdown.Menu>\n              </Dropdown>\n            )}\n          </Nav>\n          \n          <Nav>\n            {user ? (\n              <>\n                <Navbar.Text className=\"me-3\">\n                  <span className={`badge bg-${\n                    user.role === 'admin' ? 'danger' : \n                    user.role === 'vendor' ? 'warning' : 'info'\n                  } me-2`}>\n                    {user.role.toUpperCase()}\n                  </span>\n                  ğŸ‘‹ {user.name}\n                </Navbar.Text>\n                <Button variant=\"outline-light\" size=\"sm\" onClick={handleLogout}>\n                  ğŸšª Logout\n                </Button>\n              </>\n            ) : (\n              <Button variant=\"outline-light\" size=\"sm\" onClick={() => navigate('/login')}>\n                ğŸ”‘ Login\n              </Button>\n            )}\n          </Nav>\n        </Navbar.Collapse>\n      </Container>\n    </Navbar>\n  );\n};\n\nexport default AppNavbar;